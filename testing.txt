@finance_bp.route('/edit-expense/<int:expense_id>', methods=['GET', 'POST'])
@login_required
def edit_expense(expense_id):
    expense = Expense.query.get_or_404(expense_id)
    if request.method == 'POST':
        print(request.form)  # Debug: print the form data

        name = request.form.get('name')
        amount = request.form.get('amount')
        category = request.form.get('category')

        # Ensure that form data is not None
        if not name or not amount or not category:
            flash('All fields are required.')
            return redirect(url_for('finance.edit_expense', expense_id=expense.id))

        expense.name = name
        expense.amount = amount
        expense.category = category

        db.session.commit()
        flash('Expense updated successfully')
        return redirect('/expenses')
    return render_template('edit_expense.html', expense=expense)
